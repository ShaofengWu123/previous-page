<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Study | Shaofeng's Page</title>
<meta property="og:title" content="Shaofeng's Page" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A personal page of Shaofeng Wu." />

<link rel="stylesheet" href="../../css/style-mainpage.css">
<script src="/modernist/assets/js/scale.fix.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<link rel="shortcut icon" href="../../img/emilia.png"><!--logo-->
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="../../js/showhide.js"></script>
  </head>

  <body>
    <div id="particles-js"></div><!-- particle effect scripts -->
    <script src="../../js/particles.js"></script>
    <script src="../../js/app.js"></script>

  <div id="allpart">
  <div class="wrapper" id="contentpart">
    <header >
      <h1>伍少枫的个人主页</h1>
      <p>Shaofeng's Personal Website</p>
    <p class="view"><a href="https://github.com/ShaofengWu123/ShaofengWu123.github.io">View the Project on GitHub <small></small></a></p>
    <ul>
    <li><a href="https://github.com/ShaofengWu123/ShaofengWu123.github.io">View On <strong>GitHub</strong></a></li>
    </ul>
    </header>
    <section>
    <h1>Database</h1>
      <p>This part inlcudes important topics in database.</p>
      <ul>
        <li><a href="#db-content">Content outline</a></li>
        <li><a href="#db-ref">Reference</a></li>
      </ul>
      <hr>
      <h2 id="db-content">Content outline</h2>
      <ul>
        <li><a href="#" id="link1">Why database?</a><div id="thediv1" style="display:none"> 
            <p>与文件系统相比，数据库有以下优势：数据共享，减少冗余，避免不一致，提供事务支持，保持完整性，增强安全性，提供并发控制，标准化</p>
            </div>
        </li>
        <li><a href="#" id="link2">数据库系统内部体系结构</a>
        <div id="thediv2" style="display:none">
            <p>从DBMS的角度看，数据库内部的结构可描述为：三级模式，二级映象
                <br><img src="organization.png" width="450">
            </p>
            <ul>
                <li><abbr title="数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及类型的描述，不涉及具体的值">模式(Schema)</abbr>/实例(Instance)</li>
                <li>外模式/模式映象：数据的逻辑独立性</li>
                <li>模式/内模式映象：数据的物理独立性</li>
            </ul>
        </div>
        </li>
        <li>数据库系统的外部体系结构
            <ul>
                <li>客户机/服务器(C/S)</li>
                <li>浏览器/服务器</li>
                <li>分布式结构</li>
            </ul>
        </li>
        <li><a href="#" id="link3">关系数据模型</a>
          <div id="thediv3" style="display:none">
          <ul>
            <li>数据模型
              <ul>
                <li>数据模型定义：描述现实世界实体、实体间联系以及数据语义和一致性约束的模型。</li>
                <li>抽象层次：现实世界 → 概念模型 → 数据模型</li>
                <li>数据模型三要素：数据结构、数据操作、数据完整性约束</li>
              </ul>        
            </li>
            <li>关系数据模型
              <ul>
                <li>定义：用二维表格结构表示实体集，外码表示实体间联系，三类完整性规则表示数据约束的数据模型
                  <br><img src="relation_model.png" width="450">
                </li>
                <li>术语：属性、元组、域、<abbr title="关系模式的实例，即二维表，或者说元组的集合">关系</abbr>、<abbr title="属性的集合，对应二维表的表头，">关系模式</abbr>、关系数据库、关系数据库模式</li>
                <li>关系模式的形式化定义：R(U,D,dom,F)</li>
                <li>超码、候选码、主码、替换码、外码</li>
                <li>关系数据模型对应三要素
                  <ul>
                    <li>数据结构：关系</li>
                    <li>数据操作：关系代数
                      <img src="relational_algebra.png" widht="450">
                      <ul>
                        <li>原始关系代数
                          <ul>
                            <li>传统集合操作：并、交、差、笛卡尔积</li>
                            <li>专门关系操作：<abbr title="水平划分关系">选择</abbr>、<abbr title="垂直划分关系">投影</abbr>、<abbr title="自然连接、θ连接、等值连接">连接</abbr>、<abbr title="理解：求出与全部Y属性组合的X属性投影">除</abbr></li>
                            <li>补充：<abbr title="可认为用来复制一份关系，但赋予某些属性不同名称"></abbr>重命名</li>
                          </ul>
                        </li>
                        <li>附加关系代数
                          <ul>
                            <li>扩展投影（广义投影）:下标可以进行属性重命名和表达式结果命名<br>
                              例如：π<sub>E#→EmployeeNum, FirstName || LastName→Name</sub>(Employee)  
                            </li>
                            <li>聚集函数：由值的集合返回单一的值<br>
                            SUM, COUNT, AVG, MAX, MIN
                            </li>
                            <li>分组：对具有相同属性值的元组的某属性进行聚集操作，产生新的二元表<br>
                              例如：γ<sub>课程号，AVG(成绩)→平均成绩</sub>(R)
                            </li>
                            <li>排序：对关系R按某属性排序<br>
                            例：τ<sub>年龄</sub>(学生)
                            </li>
                            <li>赋值：R←E，用于中间结果存储，不显示给用户</li>
                            <li>数据更新：删除、插入、修改<br>
                            例1：Student←Student－σ<sub>name=‘Rose’</sub>(Student)，从数据库中删除名字叫Rose的学生<br>
                            例2：S1←S1∪{ (‘001’,’Rose’,19) }，插入一个新本科生<br>
                            例3：Student←𝜋<sub>‘M’||sno,name,sex,age</sub>(σ<sub>sex=‘M’</sub>(Student)) ∪ (Student－σ<sub>sex=‘M’</sub>(Student))，将所有男学生的学号前加上字母“M”
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>数据完整性约束：三类完整性规则
                      <ul>
                        <li>实体完整性：组成主码的所有属性不为空。</li>
                        <li>参照完整性：参照关系的外码值必须等于被参照关系所参照的候选码的某个值或者为空。</li>
                        <li>用户自定义完整性：某一具体应用涉及数据必须满足的语义。</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          </div>
        </li>
        <li><a href="#" id="link4">关系数据库语言SQL</a><div id="thediv4" style="display:none">
          <ul>
            <li>数据库语言：用户与数据库的唯一接口，用户通过数据库语言进行数据存取</li>
            <li>支持SQL的DBMS：MySQL、SQL Server、Access、Oracle、Sybase、DB2</li>
            <li>SQL数据库的术语（对应关系数据模型）：<br>
              基本表-关系，基本表结构-关系模式，记录-元组，字段（列）-属性，字段值-属性值，字段类型（列类型）-域，主键-主码，外键-外码
            </li>
            <li>SQL三级体系结构<br>
              <img src="./sqlstructure.png" width="450">
            </li>
            <li>SQL的组成：DDL,DML,DCL
              <img src="sqllanguage.png" width="450">
              <ul>
                <li>DDL：数据定义语言，存取数据库模式，创建/修改/删除基本表
                  <ul>
                    <li>创建基本表：Create Table
                      <ul>
                        <li>定义列<br>
                          <p>基本格式：(列名) (列类型) [ DEFAULT (默认值)] [[NOT] NULL] [[Constraint (约束名)] (约束类型)]<br>
                            例子：S# Varchar(10) Constraint PK Primary Key<br>
                            常见列类型（MySQL）：Char(n),Varchar(n),Numeric,Decimal,Integer,Int,Float,Double,Real,<br>Date,Time,DateTime</p>
                        </li>
                        <li>定义约束：列约束和表约束
                          <ul>
                            <li>Primary Key约束：一个表只能有一个主键。主键不得重复，也不能为空。<br>例：Constraint PK_S Primary Key</li>
                            <li>Unique约束：值不能重复，但可以为空。<br>例：Constraint UQ Unique(Name,School)</li>
                            <li>Foreign Key约束：表中某列值引用其它表的主键列或Unique列，参照完整性含义<br>例：Constraint FK Foreign Key(S#) References Student(S#)) [选项]
                            <br>Foreign Key选项：级联删除On Delete Cascade，级联设空On Delete Set NULL
                            </li>
                            <li>Check约束：自定义某些列上的约束<br>例：Constraint CK_S1 Check (Age>15)<br>Constraint CK_S2 Check (Sex In (‘M’,’F’))<br>Constraint CK_S3 Check (Sname Is Not NULL)</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>修改基本表：Alter Table
                      <ul>
                        <li>增加列：<br>
                          Alter Table 表名 Add 列定义<br>
                          例子：Alter Table Student Add Dept Varchar(10) Constraint UQ_S3 UNIQUE
                        </li>
                        <li>删除列<br>
                          Alter Table 表名 Drop Column 列名<br>
                          例子：Alter Table Student Drop Column age
                        </li>
                        <li>修改列（不能修改列名）<br>
                          Alter Table 表名 Modify 列定义<br>
                          例子：Alter Table Student Modify sex char(1) check (sex in ('F','M'))
                        </li>
                        <li>重命名列<br>
                          Alter Table 表名 Rename Column 旧列名 to 新列名
                        </li>
                        <li>增加表约束<br>
                          Alter Table 表名 Add 表约束
                        </li>
                        <li>删除表约束<br>
                          Alter Table 表名 Drop Constraint 约束名
                        </li>
                        <li>重命名表<br>
                          Alter Table 表名 Rename to 新表名
                        </li>
                      </ul>
                    </li>
                    <li>删除基本表：Drop Table
                      <p>Drop Table 表名 [Cascade Constraints]，删除表时同时删除约束</p>
                    </li>
                  </ul>
                </li>
                <li>DML：数据操纵语言，存取数据库数据,插入/修改/删除/查询记录
                  <ul>
                    <li>插入新记录：Insert Into ... Values ...<br>
                      例：Insert Into Student(snum,sname,sex,age) Values ('1','Mary','F',20)<br>
                      例：Insert Into table1(name,birth) Values ('David',str_to_date('24,12,1997','%d,%m,%Y'))<br>
                      没有指定值的置空或者置默认
                    </li>
                    <li>修改表中数据：Update ... Set ... [Where ...]<br>
                      例：Update Student Set sex='F', age=23 Where sname='David'<br>
                      例：Update Student Set grade=100
                    </li>
                    <li>删除表中的记录：Delete From ... Where ...<br>
                      例：Delete From Student Where sname='David'<br>
                      例：Delete From Student，即把Student置为空表，区别于Drop Table
                    </li>
                    <li>查询数据：SELECT...FROM...WHERE...GROUP BY...HAVING...ORDER BY...<br>
                    <img src="./SELECT.png" width='450'>
                    <ul>
                      <li>查询全部记录<br>Select * From Student</li>
                      <li>查询特定的列（投影）<br>Select snum, sname From Student</li>
                      <li>查询时使用别名<br>Select snum as 'Student Code',sname as 'name' From Student</li>
                      <li>查询时使用表达式或聚集函数<br>Select concat(snum,':',sname) as '学号/姓名' From Student<br>Select count(distinct snum) as 'total person' from Student</li>
                      <li>查询特定的记录（选择）<br>Select snum,sname Where ...
                      <ul>
                        <li>IN: Select snum,sname Where snum IN (1,3,5)</li>
                        <li>IS [NOT] NULL: Select sname,score where score IS NULL</li>
                        <li>LIKE: Select snum,sname where sname LIKE 'M%k_'<br>其中%表示任意长度字符串，_ 表示单个字符</li>
                        <li>NOT/AND/OR: Select sname,score where score IS NOT NULL AND sname LIKE 'M%'</li>
                      </ul>
                      </li>
                      <li>去除重复记录<br>Select Distinct sname,age from Student<br>注意：重复是对于整条记录而言的</li>
                      <li>排序查询结果<br>Select sname,age from Student Order By age ASC, sname DESC</li>
                      <li>分组查询（配合聚集函数）<br>Select sex, avg(age) as 'average age' from Student Group by sex<br>注意：分组属性必须全部出现在Group by子句中</li>
                      <li>返回特定的分组结果<br>Select class, avg(score) as 'avgscore' from Student Group by class Having count(*)>30<br>注意：聚集函数的比较式只能在Having子句中给出</li>
                      <li>连接查询（可顺带使用表别名）：<br>Select a.snum as studentcode, count(distinct b.coursecode) as coursenum from Student a, Course b where a.snum=b.snum group by a.snum having avg(b.score)>=85<br>
                      注意：where后跟连接条件
                      </li>
                      <li>嵌套查询
                        <ul>
                          <li>无关子查询：子查询语句不依赖于父查询语句返回的记录<br>
                          Select snum,sname from Student where sname snum NOT IN (Select distinct snum from Course)
                          </li>
                          <li>相关子查询：子查询依赖于父查询语句返回的记录<br>
                          Select s.snum,s.sname from Student s Where NOT EXISTS (Select * from Course c Where c.code Not IN (Select distinct SC.code from SC Where s.snum=c.snum))<br>
                          Select s.snum,s.sname from <strong>Student s</strong> Where NOT EXISTS (Select * from Course c Where NOT EXISTS(Select * from SC where SC.snum=<strong>s</strong>.snum and SC.code=c.code))<br>
                          查询选修了全部课程的学生学号姓名 
                          </li>
                          <li>联机视图：子查询出现在from子句中<br>
                          Select newS.snum,newS.sname from (Select s.snum,s.sname,count(SC.code) from Student s where s.snum=SC.snum having count(SC.code)>=2 group by s.snum) newS<br>
                          查询选课数量大于等于2的学生信息 
                          </li>
                        </ul>
                      </li>
                      <li>查询结果连接
                        <ul>
                          <li>并：UNION<br>
                          (Select snum from Student where sex='F') UNION (Select snum from (Select s.snum,avg(SC.grade) from Student s,SC where s.snum=SC.snum group by s.snum having avg(SC.grade)>=85))<br>
                          查找性别为女或平均成绩大于等于85的学生，并去除重复记录，UNION ALL命令不去除重复记录
                          </li>
                          <li>差：MINUS<br>
                          (Select code from Course) MINUS (Select distinct code from SC)<br>
                          查询没有被选过的课程代号，MySql不支持，可以用LEFT OUTER JOIN模拟
                          </li>
                          <li>交集：Intersect</li>
                        </ul>
                      </li>
                    </ul>
                    </li>
                  </ul>
                </li>
                <li>DCL：数据控制语言，存取访问控制信息</li>
              </ul>
            </li>
          </ul>
        </div>
        </li>
      </ul>
      <h2 id="db-ref">Reference</h2>
      <ul>
        <li>中科大数据库与系统课程ppt</li>
      </ul>
    <br>
    <hr>
    <p><a href="../study-main.html">Back</a></p>
    </section>
  </div>
  
  <footer>
    <p>Project maintained by <a href="https://github.com/ShaofengWu123">ShaofengWu123</a></p>
    <p>© 2021 GitHub, Inc.</p>
  </footer>
</div>


</body>
</html>